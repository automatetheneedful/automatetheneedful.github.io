trigger:
- src

pool:
  vmImage: 'ubuntu-latest'

steps:
- script: pip3 install setuptools wheel --user
- script: pip3 install pelican --user
  displayName: 'Install Pelican'

- script: |
    make publish
    git config --local user.name "Azure Pipelines"
    git config --local user.email "azuredevops@microsoft.com"
    git add output/
    git commit -m 'Publishing output content to Master'
    git push -u origin master
  displayName: 'Make HTML from Pelican source and push to master'

